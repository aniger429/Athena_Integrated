{% extends "base.html" %}
{% block customCSS %}
    <link href="{{ url_for('static', filename="css/cardStyle.css") }}" rel="stylesheet"/>
    <style>
        .title.custom{
            font-size: 30px;
        }
    </style>
{% endblock %}

{%block name%}
Analyze Data
{%endblock%}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <form action="/new_workspace" method="post" enctype="multipart/form-data">
        <div class="card" >
{#            <div class="panel-heading title custom">Initial Analysis Settings</div>#}
            <div class="header">
                <h4 class="title custom">Analysis Type</h4>
{#                <p class="category custom">Tweet</p>#}
            </div>
            <hr/>
              <div class="panel-body">
              <div class="form-group col-md-4">
                  <label for="sel1" class="col-md-12">First Level</label>
                  <select name="first-level" class="form-control col-md-12" id="sel1">
                  ã€€<option value="none" selected>None</option>
                    <option value="candidate">Candidate</option>
                    <option value="topic">Topic</option>
                    <option value="sentiment">Sentiment</option>
                  </select>
              </div>
              <div class="form-group col-md-4">
                  <label for="sel1" class="col-md-12">Second Level</label>
                  <select name="second-level" class="form-control col-md-12" id="sel2" disabled>
                    <option value="none" selected>None</option>
                    <option value="candidate">Candidate</option>
                    <option value="topic">Topic</option>
                    <option value="sentiment">Sentiment</option>
                  </select>
              </div>
              <div class="form-group col-md-4">
                  <label for="sel1" class="col-md-12">Third Level</label>
                  <select name="third-level" class="form-control col-md-12" id="sel3" disabled>
                    <option value="none" selected>None</option>
                    <option value="candidate">Candidate</option>
                    <option value="topic">Topic</option>
                    <option value="sentiment">Sentiment</option>
                  </select>
                  <select name="third-level" hidden>
                    <option value="none" selected>None</option>
                  </select>
              </div>
              </br>
              </br>
              <div class="form-group col-md-12">
                  <label for="sel1" class="col-md-12">Analyze for Candidate:</label>
                  <select name="candidate-name" class="form-control col-md-12" id="sel1">
                    {% for cname in candidate_names %}
                        <option value={{ cname }}>{{ cname | capitalize }}</option>
                    {% endfor %}
                  </select>
              </div>
{#              <div class="form-group col-md-6">#}
{#                  <label for="sel1" class="col-md-6">Workspace</label>#}
{#                  <select name="use-workspace-name" class="form-control col-md-12" id="sel1">#}
{#                    <option value="create">Create New</option>#}
{#                    {% for workspace in workspace_list %}#}
{#                        <option value={{ workspace['name'] }}>{{ workspace['name'] | capitalize }}</option>#}
{#                    {% endfor %}#}
{#                  </select>#}
{#              </div>#}
{#              <div class="form-group col-md-6">#}
{#                  <label for="sel1" class="col-md-6">New Workspace Name</label>#}
{#                  <input type="text" name="new-workspace-name" class="form-control col-md-12" value="Default"/>#}
{#              </div>#}
              <button id="reset-selection" type="button" class="btn btn-info col-md-2">Reset</button>
              <input id="submit-button" type="submit" class="btn btn-success col-md-2 pull-right" Value="Analyze">
              </div>
            </div>
         </form>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="header">
                <h4 class="title custom">Configure Analysis</h4>
{#                <p class="category custom">Tweet</p>#}
            </div>
            <hr/>
              <div class="panel-body">
                banana
              </div>
        </div>
    </div>
</div>
{% endblock %}

{% block customJS %}
    <script>
        // Executed when DOM is loaded
        $(document).ready(function() {
           // Executed when select is changed
            $("#sel1").on('change',function() {
                var x = this.selectedIndex;
                var sel1Val = this.options[this.selectedIndex].value;

                if (x == "") {
                   $("#submit-button").hide();
                } else {
                   $("#sel2").prop('disabled', false);
                   $("#sel2 option[value=" + sel1Val + "]").prop('disabled','true');

                   $("#submit-button").show();
                }

                $("#sel2").on('change',function() {
                    var sel2Val = this.options[this.selectedIndex].value;

                    $("#sel3").prop('disabled', false);
                    $("#sel3 option[value=" + sel1Val + "]").prop('disabled','true');
                    $("#sel3 option[value=" + sel2Val + "]").prop('disabled','true');
                });
            });
            $("#reset-selection").on('click',function() {
                   $("#sel1").val($("#sel1 option:first").val());
                   $("#sel2").prop('disabled','false').val($("#sel2 option:first").val());
                   $("#sel3").prop('disabled','false').val($("#sel3 option:first").val());
                   // TODO renable disabled options

                  $("#sel2 option").prop("disabled", false);
                  $("#sel3 option").prop("disabled", false);

                   $("#submit-button").hide();
            });
            // It must not be visible at first time
            $("#submit-button").css("display","none");
        });
    </script>
{% endblock %}